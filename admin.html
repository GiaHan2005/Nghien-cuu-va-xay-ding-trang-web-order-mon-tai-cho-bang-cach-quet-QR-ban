<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Admin Quản Lý</title>
<style>
body{font-family:Arial,sans-serif;margin:0;padding:0;display:flex;}
nav{width:240px;background:#1e293b;color:#fff;display:flex;flex-direction:column;height:100vh;padding:20px 0;}
nav a{color:#cbd5e1;text-decoration:none;padding:12px 20px;display:block;}
iframe{flex:1;border:none;height:100vh;}
.logout{position:fixed;bottom:20px;left:5%;}
.logout button{width:100%;padding:10px;border:none;border-radius:8px;cursor:pointer;}
.ten-nv{color:#cfd8dc;font-size:14px;margin-left:15px;font-style:italic;}
</style>
</head>
<body>
<nav>
    <h2>TIỆM TRÀ</h2>
    <p class="ten-nv" id="nhanvien">Đang tải...</p>
    <a href="trangchu.html" target="content-frame">Trang Chủ</a>
    <a href="quanlyban.html" target="content-frame">Danh Sách Bàn</a>
    <a href="thucdon.html" target="content-frame">Thực Đơn</a>
    <a href="qrban.html" target="content-frame">QR Bàn</a>
    <form class="logout" onsubmit="logout(event)">
        <button type="submit">Đăng Xuất</button>
    </form>
</nav>
<iframe name="content-frame" src="trangchu.html"></iframe>

<script>
// Lấy thông tin nhân viên
async function checkLogin(){
    const resp = await fetch('login.php');
    const data = await resp.json();
    if(data.logged_in){
        document.getElementById('nhanvien').innerText = 'Nhân viên: '+data.HoVaten;
    }else{
        window.location.href = 'login.html';
    }
}
checkLogin();

// Logout
async function logout(e){
    e.preventDefault();
    await fetch('logout.php'); // Tạo file logout.php để destroy session
    window.location.href = 'login.html';
}
</script>
</body>
</html>
